<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SP-Energy | Mapas</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        /* --- Estilos espec√≠ficos del Mapa --- */
        .map-container {
            position: relative;
            height: 600px; /* Altura del mapa */
            width: 100%;
            border: 2px solid #ccc;
            border-radius: 5px;
            margin-bottom: 2rem;
            z-index: 1;
        }

        /* Panel de Control de Capas (3 Columnas) */
        .layers-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .layer-group {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-top: 4px solid #FFD700;
        }

        .layer-group h3 {
            margin-top: 0;
            font-size: 1.1rem;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
            margin-bottom: 12px;
        }

        .layer-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.95rem;
            color: #555;
        }

        .layer-item input {
            margin-right: 10px;
            transform: scale(1.2); /* Checkbox un poco m√°s grande */
            cursor: pointer;
        }

        /* Bot√≥n Glosario */
        .glossary-section {
            margin-top: 3rem;
            border-top: 1px solid #ccc;
            padding-top: 2rem;
        }

        #glossaryContent {
            display: none; /* Oculto por defecto */
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-top: 15px;
            border-left: 5px solid #2980b9;
        }

        .glossary-item {
            margin-bottom: 10px;
        }
        .glossary-term { font-weight: bold; color: #333; }
        .glossary-def { margin-left: 10px; color: #666; }

    </style>
</head>
<body>

    <header class="main-header">
        <div class="logo-container">
            <span class="logo-text">SP-ENERGY <span class="sun-icon">‚òÄÔ∏è</span></span>
        </div>
        <div class="slogan-container">
            <h1>Energ√≠a Solar para Todos</h1>
        </div>
        <div class="spacer"></div> 
    </header>

    <nav class="navbar">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="mapa.html" class="active">Mapas</a></li>
            <li><a href="graficas.html">Gr√°ficas y Tablas</a></li>
            <li><a href="emisiones.html">Emisiones</a></li>
            <li><a href="info.html">Contacto</a></li>
        </ul>
    </nav>

    <main class="main-container">
        
        <h2 class="section-title">Visualizador Geogr√°fico</h2>

        <section class="graph-card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h3>Selecciona el tipo de visualizaci√≥n:</h3>
                <div class="view-toggle">
                    <button id="btnGeneral" class="btn primary">Mapa General</button>
                    <button id="btnPV" class="btn">Mapa Fotovoltaico</button>
                </div>
            </div>

            <div id="map" class="map-container"></div>

            <div class="layers-panel">
                
                <div class="layer-group">
                    <h3>‚òÄÔ∏è Energ√≠a Fotovoltaica</h3>
                    <div class="layer-item"><input type="checkbox" id="layerRad" value="radiacion"><label for="layerRad">Radiaci√≥n Solar</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerPot" value="potencial"><label for="layerPot">Potencial Fotovoltaico</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerCent" value="centrales"><label for="layerCent">Centrales Fotovoltaicas</label></div>
                </div>

                <div class="layer-group">
                    <h3>üåç Territorio y Clima</h3>
                    <div class="layer-item"><input type="checkbox" id="layerTempLow" value="tempBaja"><label for="layerTempLow">Temperatura Baja</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerTempMid" value="tempMedia"><label for="layerTempMid">Temperatura Media</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerTempHigh" value="tempAlta"><label for="layerTempHigh">Temperatura Alta</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerANP" value="anp"><label for="layerANP">√Åreas Naturales Protegidas (ANP)</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerHuman" value="asentamientos"><label for="layerHuman">Asentamientos Humanos</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerWater" value="agua"><label for="layerWater">Cuerpos de Agua</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerRelief" value="relieve"><label for="layerRelief">Relieve / Topograf√≠a</label></div>
                </div>

                <div class="layer-group">
                    <h3>‚ö° Infraestructura SEN</h3>
                    <div class="layer-item"><input type="checkbox" id="layerReg" value="regiones"><label for="layerReg">Divisi√≥n de Regiones</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerTx" value="transmision"><label for="layerTx">L√≠neas de Transmisi√≥n</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerDx" value="distribucion"><label for="layerDx">L√≠neas de Distribuci√≥n</label></div>
                    <div class="layer-item"><input type="checkbox" id="layerSub" value="subestaciones"><label for="layerSub">Subestaciones El√©ctricas</label></div>
                </div>

            </div>
        </section>

        <section class="glossary-section">
            <button id="btnGlossary" class="btn" style="background:#333; color:white; width:100%;">Ver Glosario de T√©rminos</button>
            
            <div id="glossaryContent">
                <h3>Glosario de T√©rminos</h3>
                <div class="glossary-item"><span class="glossary-term">ANP:</span> <span class="glossary-def">√Åreas Naturales Protegidas. Zonas del territorio nacional sobre las que la naci√≥n ejerce su soberan√≠a y jurisdicci√≥n.</span></div>
                <div class="glossary-item"><span class="glossary-term">SEN:</span> <span class="glossary-def">Sistema El√©ctrico Nacional. Conjunto de redes, centrales y equipos para generar, transmitir y distribuir energ√≠a.</span></div>
                <div class="glossary-item"><span class="glossary-term">Radiaci√≥n Solar:</span> <span class="glossary-def">Energ√≠a emitida por el Sol que se propaga en todas las direcciones a trav√©s del espacio mediante ondas electromagn√©ticas (kWh/m¬≤).</span></div>
                <div class="glossary-item"><span class="glossary-term">Potencial Fotovoltaico:</span> <span class="glossary-def">Capacidad de una regi√≥n para generar electricidad mediante paneles solares, considerando clima y radiaci√≥n.</span></div>
                <div class="glossary-item"><span class="glossary-term">L√≠neas de Transmisi√≥n:</span> <span class="glossary-def">Red de cables de alta tensi√≥n que transportan energ√≠a desde las centrales hasta las subestaciones.</span></div>
                <div class="glossary-item"><span class="glossary-term">Subestaci√≥n:</span> <span class="glossary-def">Instalaci√≥n encargada de modificar los niveles de tensi√≥n de la energ√≠a el√©ctrica para su transmisi√≥n o distribuci√≥n.</span></div>
            </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2025 SP-Energy. Visualizaci√≥n de datos energ√©ticos.</p>
    </footer>

    <script>
        // 1. INICIALIZAR MAPA (Centrado en M√©xico)
        const map = L.map('map').setView([23.6345, -102.5528], 5);

        // 2. CAPA BASE (OpenStreetMap - Limpio)
        const baseLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // 3. DEFINICI√ìN DE CAPAS (Placeholders)
        // NOTA: Aqu√≠ es donde conectar√≠as tus archivos GeoJSON reales.
        // Por ahora, crear√© grupos vac√≠os para que los checkbox funcionen visualmente.
        
        const layers = {
            radiacion: L.layerGroup(), // Aqu√≠ cargar√≠as tu capa de radiaci√≥n
            potencial: L.layerGroup(),
            centrales: L.layerGroup(),
            tempBaja: L.layerGroup(),
            tempMedia: L.layerGroup(),
            tempAlta: L.layerGroup(),
            anp: L.layerGroup(),
            asentamientos: L.layerGroup(),
            agua: L.layerGroup(),
            relieve: L.layerGroup(),
            regiones: L.layerGroup(),
            transmision: L.layerGroup(),
            distribucion: L.layerGroup(),
            subestaciones: L.layerGroup()
        };

        // 4. L√ìGICA DE CHECKBOXES
        const checkboxes = document.querySelectorAll('.layer-item input[type="checkbox"]');
        
        checkboxes.forEach(box => {
            box.addEventListener('change', function() {
                const layerId = this.value;
                if (this.checked) {
                    map.addLayer(layers[layerId]);
                    console.log("Capa activada: " + layerId);
                    // Simulaci√≥n visual (Solo para demo)
                    // alert("Se activar√≠a la capa: " + layerId); 
                } else {
                    map.removeLayer(layers[layerId]);
                    console.log("Capa desactivada: " + layerId);
                }
            });
        });

        // 5. L√ìGICA DE BOTONES (General vs PV)
        const btnGen = document.getElementById('btnGeneral');
        const btnPV = document.getElementById('btnPV');

        btnGen.addEventListener('click', () => {
            btnGen.classList.add('primary');
            btnPV.classList.remove('primary');
            // Aqu√≠ podr√≠as resetear la vista o activar capas por defecto del mapa general
            map.setView([23.6345, -102.5528], 5);
        });

        btnPV.addEventListener('click', () => {
            btnPV.classList.add('primary');
            btnGen.classList.remove('primary');
            // Aqu√≠ podr√≠as hacer zoom a zonas solares o activar radiaci√≥n autom√°ticamente
            document.getElementById('layerRad').click(); // Truco: simula click en radiaci√≥n
        });

        // 6. L√ìGICA GLOSARIO
        const btnGlossary = document.getElementById('btnGlossary');
        const glossaryContent = document.getElementById('glossaryContent');

        btnGlossary.addEventListener('click', () => {
            if (glossaryContent.style.display === "block") {
                glossaryContent.style.display = "none";
                btnGlossary.textContent = "Ver Glosario de T√©rminos";
            } else {
                glossaryContent.style.display = "block";
                btnGlossary.textContent = "Ocultar Glosario";
            }
        });

    </script>

</body>
</html>
